# WhatsApp Business API Configuration

# General Configuration
PORT=8000
TIME_ZONE=America/Bogota

# DEBUG or INFO or WARNING or ERROR or CRITICAL
LOG_LEVEL=INFO
LOG_DIR=./logs

## Environment DEV or PROD
ENVIRONMENT=DEV  

# WhatsApp Graph API
BASE_URL=https://graph.facebook.com/
API_VERSION=v24.0

# ==========================================
# BSUID Support (v24.0+)
# ==========================================
# WhatsApp API v24.0+ introduces Business-Scoped User IDs (BSUIDs) for stable user identification.
#
# What is a BSUID?
# - Format: "user.9373795779eb6..." (stable identifier that doesn't change)
# - Replaces phone numbers for users who enable WhatsApp usernames
# - Remains consistent even if user changes phone number
#
# Webhook Changes:
# 1. Incoming Messages:
#    - "from_user_id": Contains BSUID when available
#    - "from": May be EMPTY for username-only users (when business hasn't messaged
#              user's phone in last 30 days OR user hasn't added business to contacts)
#
# 2. Status Updates:
#    - "recipient_user_id": Contains BSUID when message was sent to BSUID
#    - "recipient_id": May be EMPTY for BSUID-only users (same conditions as above)
#
# 3. User Profiles:
#    - "username": WhatsApp username (e.g., "@johndoe")
#    - "country_code": User's country code
#
# Send Message Responses:
# - "contacts[].user_id": BSUID if sent to BSUID
# - "contacts[].wa_id": EMPTY if sent to BSUID
# - "contacts[].input": Returns what you sent (BSUID or phone number)
#
# Important Limitations:
# - Error Code 131062: Authentication messages (OTPs, verification codes) can ONLY
#                      be sent to phone numbers, NOT BSUIDs
#
# Developer Guidance:
# - Use webhook.user.user_id property (returns BSUID if available, else phone)
# - Use webhook.recipient_id property for status updates (BSUID preferred)
# - Your code automatically handles BSUID vs phone number scenarios
# ==========================================

# Get these values from your WhatsApp Business API setup

# WhatsApp Access Token (required)
WP_ACCESS_TOKEN=

# WhatsApp Phone Number ID (required) 
WP_PHONE_ID=

# WhatsApp Business ID (required)
WP_BID=

# Webhook Configuration (required)
# Token used by WhatsApp to verify your endpoint and sign webhooks
WHATSAPP_WEBHOOK_VERIFY_TOKEN=your_webhook_verify_token

# Redis Configuration (Optional - uncomment to enable Redis persistence)
REDIS_URL=redis://localhost:6379/
REDIS_MAX_CONNECTIONS=64

# Optional: AI Tools
OPENAI_API_KEY=
